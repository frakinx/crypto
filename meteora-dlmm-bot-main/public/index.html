<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meteora DLMM Pools</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <h1 class="sidebar-title">Meteora</h1>
      <p class="sidebar-subtitle">DLMM Pools</p>
    </div>
    <nav class="sidebar-nav">
      <button class="nav-item active" data-tab="pools">
        <span class="nav-icon">üìä</span>
        <span class="nav-text">–ü—É–ª—ã</span>
      </button>
      <button class="nav-item" data-tab="wallet">
        <span class="nav-icon">üëõ</span>
        <span class="nav-text">–ö–æ—à–µ–ª–µ–∫</span>
      </button>
      <button class="nav-item" data-tab="admin">
        <span class="nav-icon">‚öôÔ∏è</span>
        <span class="nav-text">–ê–¥–º–∏–Ω</span>
      </button>
    </nav>
    <div class="sidebar-footer">
      <div id="autoRefreshInfo" class="auto-refresh-info">–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 3 –º–∏–Ω</div>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <div class="container">

    <!-- Pools Tab -->
    <div id="poolsTab" class="tab-content active">

    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –±–ª–æ–∫–∏ –≤–≤–µ—Ä—Ö—É -->
    <div class="info-blocks">
      <div class="info-block info-block-green">
        <div class="info-block-header">
          <span class="info-block-icon">üí∞</span>
          <span class="info-block-title">–ë–∞–ª–∞–Ω—Å –ø–æ–∑–∏—Ü–∏–π</span>
        </div>
        <div class="info-block-value" id="positionBalance">$0</div>
        <div class="info-block-subtitle" id="positionBalanceSOL">0 SOL</div>
      </div>
      
      <div class="info-block info-block-blue">
        <div class="info-block-header">
          <span class="info-block-icon">üëõ</span>
          <span class="info-block-title">–ë–∞–ª–∞–Ω—Å –∫–æ—à–µ–ª—å–∫–∞</span>
        </div>
        <div class="info-block-value" id="walletBalance">$0</div>
        <div class="info-block-subtitle" id="walletBalanceSOL">0 SOL</div>
      </div>
      
      <div class="info-block info-block-teal">
        <div class="info-block-header">
          <span class="info-block-icon">‚è≥</span>
          <span class="info-block-title">–ù–µ–≤—ã–∫—É–ø–ª–µ–Ω–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏</span>
        </div>
        <div class="info-block-value" id="unclaimedFees">$0</div>
        <div class="info-block-subtitle" id="unclaimedFeesSOL">0 SOL</div>
      </div>
      
      <div class="info-block info-block-purple">
        <div class="info-block-header">
          <span class="info-block-icon">‚úÖ</span>
          <span class="info-block-title">–í–∑—ã—Å–∫–∞–Ω–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏</span>
        </div>
        <div class="info-block-value" id="claimedFees">$0</div>
        <div class="info-block-subtitle" id="claimedFeesSOL">0 SOL</div>
      </div>
    </div>

    <!-- –°–µ–∫—Ü–∏—è –ø–æ–∑–∏—Ü–∏–π -->
    <div class="positions-section">
      <div class="positions-header">
        <h2 class="positions-title">–í–∞—à–∏ –ø–æ–∑–∏—Ü–∏–∏</h2>
        <div class="positions-count" id="positionsCount">0 –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π</div>
      </div>
      <div id="positionsContainer" class="positions-container">
        <!-- –ü–æ–∑–∏—Ü–∏–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
      </div>
    </div>

    <div class="stats">
      <div class="stat-card">
        <div class="stat-label">–í—Å–µ–≥–æ –ø—É–ª–æ–≤</div>
        <div class="stat-value" id="totalPools">-</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">–û–±—â–∞—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å</div>
        <div class="stat-value" id="totalLiquidity">-</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">–û–±—ä–µ–º –∑–∞ 24—á</div>
        <div class="stat-value" id="totalVolume">-</div>
      </div>
    </div>

    <div id="loading" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>
    <div id="error" class="error" style="display: none;"></div>
    
    <div id="poolsContainer" class="pools-container"></div>
    
    <div id="loadMoreContainer" style="text-align: center; margin-top: 30px; display: none;">
      <button id="loadMoreBtn" class="load-more-btn">–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â–µ</button>
      <div id="poolsInfo" class="pools-info"></div>
    </div>
    </div>

    <!-- Wallet & Proxy Tab -->
    <!-- Admin Tab -->
    <div id="adminTab" class="tab-content">
      <div class="admin-section">
        <h2>‚öôÔ∏è –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–∑–∏—Ü–∏–π</h2>
        
        <div class="admin-pools-config">
          <h3>üèä –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—É–ª–æ–≤</h3>
          <p style="color: rgba(255, 255, 255, 0.7); font-size: 0.9em; margin-bottom: 15px;">
            –ó–¥–µ—Å—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—É–ª–∞. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏ –≤ –ø—É–ª–µ –∏–ª–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–¥–µ—Å—å. 
            –ö–∞–∂–¥—ã–π –ø—É–ª –∏–º–µ–µ—Ç —Å–≤–æ–∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ–∑–∏—Ü–∏–π.
          </p>
          <div id="poolsConfigList" class="pools-config-list"></div>
        </div>

        <div class="admin-positions">
          <h3>üìä –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏</h3>
          <div id="positionsList" class="positions-list"></div>
        </div>

        <div class="admin-stats">
          <h3>üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π</div>
              <div class="stat-value" id="activePositionsCount">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">–ó–∞–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π</div>
              <div class="stat-value" id="closedPositionsCount">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">–ù–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏</div>
              <div class="stat-value" id="totalFees">$0.00</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="walletTab" class="tab-content">
      <div class="wallet-section">
        <h2>üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞</h2>
        <div class="wallet-card">
          <div class="wallet-status" id="walletStatus">
            <div class="status-indicator disconnected"></div>
            <span id="walletStatusText">–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω</span>
          </div>
          <div id="walletInfo" class="wallet-info" style="display: none;">
            <div class="wallet-address">
              <strong>–ê–¥—Ä–µ—Å:</strong> <span id="walletAddress">-</span>
              <button id="copyAddressBtn" class="copy-btn" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å">üìã</button>
            </div>
            <div class="wallet-balance">
              <strong>–ë–∞–ª–∞–Ω—Å SOL:</strong> <span id="walletBalance">-</span>
              <button id="refreshBalanceBtn" class="refresh-balance-btn" title="–û–±–Ω–æ–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å" style="margin-left: 8px; padding: 4px 8px; background: #667eea; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.85em; display: none;">üîÑ</button>
            </div>
            <div class="wallet-hint" style="font-size: 0.85em; color: #666; margin-top: 8px; padding: 8px; background: #f0f0f0; border-radius: 4px;">
              üí° <strong>–°–æ–≤–µ—Ç:</strong> –ü—É–±–ª–∏—á–Ω—ã–π RPC Solana –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–º. –î–ª—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±—ã—Å—Ç—Ä—ã–π RPC endpoint (Helius, QuickNode, Triton) –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö RPC –Ω–∏–∂–µ.
            </div>
          </div>
          <div class="wallet-actions">
            <button id="connectPhantomBtn" class="wallet-btn phantom-btn">
              <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23AB9FF2'%3E%3Cpath d='M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm4.5 8.25h-2.25v-1.5h2.25v1.5zm-9 0H5.25v-1.5H7.5v1.5zm11.25 0h-2.25v-1.5h2.25v1.5zm-9 0H5.25v-1.5h2.25v1.5z'/%3E%3C/svg%3E" alt="Phantom" class="wallet-icon">
              –ü–æ–¥–∫–ª—é—á–∏—Ç—å Phantom
            </button>
            <button id="disconnectWalletBtn" class="wallet-btn disconnect-btn" style="display: none;">
              –û—Ç–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫
            </button>
          </div>
          <div id="walletError" class="wallet-error" style="display: none;"></div>
        </div>
      </div>

      <div class="wallet-section">
        <h2>üîÅ Swap (Jupiter v6)</h2>
        <div class="wallet-card">
          <div class="token-selector">
            <label>From:</label>
            <div class="token-quick">
              <button type="button" class="token-chip" data-role="input" data-symbol="SOL">SOL</button>
              <button type="button" class="token-chip" data-role="input" data-symbol="USDC">USDC</button>
              <button type="button" class="token-chip" data-role="input" data-symbol="USDT">USDT</button>
            </div>
            <input type="text" id="inputTokenSearch" placeholder="Search token name or symbol..." autocomplete="off">
            <div id="inputTokenDropdown" class="token-dropdown" style="display: none;"></div>
            <input type="hidden" id="inputMint">
            <div id="inputTokenInfo" class="token-info"></div>
          </div>
          <div class="token-selector">
            <label>To:</label>
            <div class="token-quick">
              <button type="button" class="token-chip" data-role="output" data-symbol="SOL">SOL</button>
              <button type="button" class="token-chip" data-role="output" data-symbol="USDC">USDC</button>
              <button type="button" class="token-chip" data-role="output" data-symbol="USDT">USDT</button>
            </div>
            <input type="text" id="outputTokenSearch" placeholder="Search token name or symbol..." autocomplete="off">
            <div id="outputTokenDropdown" class="token-dropdown" style="display: none;"></div>
            <input type="hidden" id="outputMint">
            <div id="outputTokenInfo" class="token-info"></div>
          </div>
          <div class="form-group">
            <label for="swapAmount">Amount (–≤ –µ–¥–∏–Ω–∏—Ü–∞—Ö —Ç–æ–∫–µ–Ω–∞):</label>
            <input type="number" id="swapAmount" step="0.000000001" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 1 –¥–ª—è 1 SOL" />
            <small id="swapAmountHint">–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1 –¥–ª—è 1 SOL, 100 –¥–ª—è 100 USDC)</small>
          </div>
          
          <!-- –ë–ª–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å–≤–∞–ø–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ -->
          <div id="swapPreviewResult" style="display: none; margin-top: 15px; padding: 15px; background: rgba(102, 126, 234, 0.1); border: 1px solid rgba(102, 126, 234, 0.3); border-radius: 8px;">
            <div style="color: #1a1a2e; font-weight: 600; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
              <span>üí±</span>
              <span>–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–≤–∞–ø–∞</span>
            </div>
            <div style="color: #333; font-size: 0.95em;">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                <span style="color: #555; font-weight: 500;">–í—ã –æ—Ç–¥–∞–µ—Ç–µ:</span>
                <span id="swapPreviewInput" style="color: #1a1a2e; font-weight: 600;">-</span>
              </div>
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                <span style="color: #555; font-weight: 500;">–í—ã –ø–æ–ª—É—á–∏—Ç–µ:</span>
                <span id="swapPreviewOutput" style="color: #2e7d32; font-weight: 600; font-size: 1.1em;">-</span>
              </div>
              <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid rgba(0, 0, 0, 0.1);">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                  <span style="color: #666; font-size: 0.85em;">–ö—É—Ä—Å –æ–±–º–µ–Ω–∞:</span>
                  <span id="swapPreviewRate" style="color: #333; font-size: 0.85em; font-weight: 500;">-</span>
                </div>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="swapSlippage">Slippage (bps):</label>
            <input type="number" id="swapSlippage" placeholder="100 = 1%" value="100" />
          </div>
          <div class="form-actions">
            <button type="button" id="jupGetQuoteBtn" class="save-btn">–ü–æ–ª—É—á–∏—Ç—å –∫–æ—Ç–∏—Ä–æ–≤–∫—É</button>
            <button type="button" id="jupSwapBtn" class="test-btn">–°–¥–µ–ª–∞—Ç—å —Å–≤–∞–ø</button>
          </div>
          <div id="swap-status" class="rpc-status" style="display: none;">
            <div class="status-message"></div>
          </div>
          <div id="jupQuoteResult" class="rpc-status" style="display: none;">
            <div class="status-message"></div>
          </div>
          <div id="jupSwapResult" class="rpc-status" style="display: none;">
            <div class="status-message"></div>
          </div>
        </div>
      </div>

      <div class="proxy-section">
        <h2>üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∫—Å–∏</h2>
        <div class="proxy-card">
          <form id="proxyForm">
            <div class="form-group">
              <label for="proxyEnabled">
                <input type="checkbox" id="proxyEnabled" />
                –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Å–∏
              </label>
            </div>
            <div class="form-group">
              <label for="proxyType">–¢–∏–ø –ø—Ä–æ–∫—Å–∏:</label>
              <select id="proxyType" disabled>
                <option value="http">HTTP</option>
                <option value="https">HTTPS</option>
                <option value="socks4">SOCKS4</option>
                <option value="socks5">SOCKS5</option>
              </select>
            </div>
            <div class="form-group">
              <label for="proxyHost">–•–æ—Å—Ç:</label>
              <input type="text" id="proxyHost" placeholder="proxy.example.com" disabled />
            </div>
            <div class="form-group">
              <label for="proxyPort">–ü–æ—Ä—Ç:</label>
              <input type="number" id="proxyPort" placeholder="8080" disabled />
            </div>
            <div class="form-group">
              <label for="proxyUsername">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):</label>
              <input type="text" id="proxyUsername" placeholder="username" disabled />
            </div>
            <div class="form-group">
              <label for="proxyPassword">–ü–∞—Ä–æ–ª—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):</label>
              <input type="password" id="proxyPassword" placeholder="password" disabled />
            </div>
            <div class="form-actions">
              <button type="submit" class="save-btn" disabled>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
              <button type="button" id="testProxyBtn" class="test-btn" disabled>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Å–∏</button>
            </div>
          </form>
          <div id="proxyStatus" class="proxy-status" style="display: none;">
            <div class="status-message"></div>
          </div>
        </div>
      </div>

      <!-- RPC settings removed: using fixed Helius RPC endpoint in code -->
    </div>
  </div>

  <!-- Filter Modal -->
  <div id="filterModal" class="filter-modal">
    <div class="filter-modal-content">
      <div class="filter-modal-header">
        <h2>Filter by</h2>
        <button class="filter-modal-close" id="closeFilterBtn">&times;</button>
      </div>
      
      <div class="filter-modal-body">
        <!-- Token Details -->
        <div class="filter-section">
          <h3>Token Details</h3>
          <div class="filter-category">
            <div class="filter-checkbox">
              <label>
                <input type="checkbox" id="filterVerified" />
                <span>Verified</span>
              </label>
            </div>
          </div>
        </div>

        <!-- Channel Width -->
        <div class="filter-section">
          <h3>–®–∏—Ä–∏–Ω–∞ –∫–∞–Ω–∞–ª–∞ (Channel Width)</h3>
          <div style="font-size: 0.85em; color: rgba(255, 255, 255, 0.7); margin-bottom: 12px; padding: 8px; background: rgba(102, 126, 234, 0.1); border-radius: 4px; border-left: 3px solid rgba(102, 126, 234, 0.5);">
            –£–∫–∞–∂–∏—Ç–µ —à–∏—Ä–∏–Ω—É –∫–∞–Ω–∞–ª–∞ –≤ –æ–¥–Ω—É —Å—Ç–æ—Ä–æ–Ω—É (%). –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥–µ—Ç –ø—É–ª—ã —Å –ø–æ–¥—Ö–æ–¥—è—â–∏–º–∏ bin steps –¥–ª—è –ø–æ–∑–∏—Ü–∏–∏ —Å –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º ‚â• —É–∫–∞–∑–∞–Ω–Ω–æ–π —à–∏—Ä–∏–Ω—ã √ó 2.
          </div>
          <div class="filter-range">
            <div class="filter-range-input" style="width: 100%;">
              <label>–®–∏—Ä–∏–Ω–∞ –∫–∞–Ω–∞–ª–∞ (%)</label>
              <input type="number" id="filterChannelWidth" placeholder="2" step="0.1" min="0.1" max="50" />
              <small style="display: block; margin-top: 4px; color: rgba(255, 255, 255, 0.5); font-size: 0.85em;">
                –ù–∞–ø—Ä–∏–º–µ—Ä: 2% –æ–∑–Ω–∞—á–∞–µ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω 4% (2% –≤–≤–µ—Ä—Ö + 2% –≤–Ω–∏–∑)
              </small>
            </div>
          </div>
        </div>

        <!-- Bin Step Range -->
        <div class="filter-section">
          <h3>Bin step of the pool</h3>
          <div class="filter-range">
            <div class="filter-range-input">
              <label>Min</label>
              <input type="number" id="filterBinStepMin" placeholder="0" step="1" />
            </div>
            <div class="filter-range-input">
              <label>Max</label>
              <input type="number" id="filterBinStepMax" placeholder="‚àû" step="1" />
            </div>
          </div>
        </div>

        <!-- Liquidity Range -->
        <div class="filter-section">
          <h3>Liquidity by range</h3>
          <div class="filter-range">
            <div class="filter-range-input">
              <label>Min ($)</label>
              <input type="number" id="filterLiquidityMin" placeholder="0" step="0.01" />
            </div>
            <div class="filter-range-input">
              <label>Max ($)</label>
              <input type="number" id="filterLiquidityMax" placeholder="‚àû" step="0.01" />
            </div>
          </div>
        </div>

        <!-- Volume by Period -->
        <div class="filter-section">
          <h3>Volume by period</h3>
          <div class="filter-period">
            <select id="filterVolumePeriod" class="filter-period-select">
              <option value="min_30">30m</option>
              <option value="hour_1">1h</option>
              <option value="hour_2">2h</option>
              <option value="hour_4">4h</option>
              <option value="hour_12">12h</option>
              <option value="hour_24">24h</option>
            </select>
            <input type="number" id="filterVolumePeriodMin" placeholder="‚â• $" step="0.01" class="filter-period-input" />
          </div>
        </div>

        <!-- Fees by Period -->
        <div class="filter-section">
          <h3>Fees by period</h3>
          <div class="filter-period">
            <select id="filterFeesPeriod" class="filter-period-select">
              <option value="min_30">30m</option>
              <option value="hour_1">1h</option>
              <option value="hour_2">2h</option>
              <option value="hour_4">4h</option>
              <option value="hour_12">12h</option>
              <option value="hour_24">24h</option>
            </select>
            <input type="number" id="filterFeesPeriodMin" placeholder="‚â• $" step="0.01" class="filter-period-input" />
          </div>
        </div>

        <!-- Fees 24h Range -->
        <div class="filter-section">
          <h3>Fees 24h by range</h3>
          <div class="filter-range">
            <div class="filter-range-input">
              <label>Min ($)</label>
              <input type="number" id="filterFees24hMin" placeholder="0" step="0.01" />
            </div>
            <div class="filter-range-input">
              <label>Max ($)</label>
              <input type="number" id="filterFees24hMax" placeholder="‚àû" step="0.01" />
            </div>
          </div>
        </div>

        <!-- Fee/TVL % by Period -->
        <div class="filter-section">
          <h3>Fee/TVL % by period</h3>
          <div class="filter-period">
            <select id="filterFeeTvlPeriod" class="filter-period-select">
              <option value="min_30">30m</option>
              <option value="hour_1">1h</option>
              <option value="hour_2">2h</option>
              <option value="hour_4">4h</option>
              <option value="hour_12">12h</option>
              <option value="hour_24">24h</option>
            </select>
            <input type="number" id="filterFeeTvlPeriodMin" placeholder="‚â• %" step="0.01" class="filter-period-input" />
          </div>
        </div>

        <!-- APR Range -->
        <div class="filter-section">
          <h3>APR by range</h3>
          <div class="filter-range">
            <div class="filter-range-input">
              <label>Min (%)</label>
              <input type="number" id="filterAprMin" placeholder="0" step="0.01" />
            </div>
            <div class="filter-range-input">
              <label>Max (%)</label>
              <input type="number" id="filterAprMax" placeholder="‚àû" step="0.01" />
            </div>
          </div>
        </div>

        <!-- Launchpad -->
        <div class="filter-section">
          <div class="filter-section-header">
            <h3>Launchpad</h3>
            <button type="button" class="filter-select-all" id="selectAllLaunchpads">Select all</button>
          </div>
          <div style="font-size: 0.85em; color: rgba(255, 200, 100, 0.9); margin-bottom: 10px; padding: 8px; background: rgba(255, 200, 100, 0.1); border-radius: 4px; border-left: 3px solid rgba(255, 200, 100, 0.5);">
            ‚ö†Ô∏è <strong>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ API:</strong> API Meteora —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ launchpad —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—á–µ–Ω—å –º–∞–ª–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—É–ª–æ–≤ (–æ–±—ã—á–Ω–æ 0-2 –ø—É–ª–∞). –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—É–ª–æ–≤ –Ω–µ –∏–º–µ—é—Ç –ø–æ–ª—è launchpad –≤ –¥–∞–Ω–Ω—ã—Ö API, –ø–æ—ç—Ç–æ–º—É —Ñ–∏–ª—å—Ç—Ä –ø–æ launchpad –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å 0 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–∞–∂–µ –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö launchpad.
          </div>
          <div class="filter-launchpad-list" id="launchpadList">
            <!-- Launchpad options will be populated dynamically -->
          </div>
        </div>

        <!-- Pool Features -->
        <div class="filter-section">
          <h3>Pool Features</h3>
          <div class="filter-category">
            <div class="filter-checkbox">
              <label>
                <input type="checkbox" id="filterLfg" />
                <span>LFG tag</span>
              </label>
            </div>
          </div>
        </div>
      </div>

      <div class="filter-modal-footer">
        <button class="filter-btn-reset" id="resetFilterBtn">
          <span>‚Üª</span> Reset
        </button>
        <button class="filter-btn-save" id="saveFilterBtn">Save</button>
      </div>
    </div>
  </div>

  <!-- Pool Config Edit Modal -->
  <div id="poolConfigModal" class="pool-modal">
    <div class="pool-modal-content">
      <div class="pool-modal-header">
        <h2 id="poolConfigModalTitle">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—É–ª–∞</h2>
        <button class="pool-modal-close" id="closePoolConfigModalBtn">&times;</button>
      </div>
      <div class="pool-modal-body">
        <div id="poolConfigModalContent">
          <div class="pool-config-form-container">
            <div class="form-group">
              <label style="color: white;">–ê–¥—Ä–µ—Å –ø—É–ª–∞:</label>
              <input type="text" id="editPoolAddress" readonly style="width: 100%; padding: 10px; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 6px; background: rgba(15, 15, 30, 0.6); color: white; font-family: monospace;" />
            </div>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;">
              <div class="form-group">
                <label style="color: rgba(255, 255, 255, 0.9); font-size: 0.9em;">Stop Loss (%):</label>
                <input type="number" id="editStopLossPercent" step="0.1" min="-10" max="0" value="-2" style="width: 100%; padding: 10px; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 6px; background: rgba(15, 15, 30, 0.6); color: white;" />
              </div>
              <div class="form-group">
                <label style="color: rgba(255, 255, 255, 0.9); font-size: 0.9em;">Take Profit (%):</label>
                <input type="number" id="editTakeProfitPercent" step="0.1" min="0" max="100" value="2" style="width: 100%; padding: 10px; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 6px; background: rgba(15, 15, 30, 0.6); color: white;" />
              </div>
              <div class="form-group">
                <label style="color: rgba(255, 255, 255, 0.9); font-size: 0.9em;">–ü—Ä–æ–≤–µ—Ä–∫–∞ Fee (%):</label>
                <input type="number" id="editFeeCheckPercent" step="0.1" min="0" max="100" value="50" style="width: 100%; padding: 10px; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 6px; background: rgba(15, 15, 30, 0.6); color: white;" />
              </div>
              <div class="form-group">
                <label style="color: rgba(255, 255, 255, 0.9); font-size: 0.9em; display: flex; align-items: center; gap: 8px;">
                  <input type="checkbox" id="editMirrorSwapEnabled" checked style="width: auto; margin: 0;" />
                  Mirror Swap
                </label>
              </div>
              <div class="form-group">
                <label style="color: rgba(255, 255, 255, 0.9); font-size: 0.9em;">Hedge Amount (%):</label>
                <input type="number" id="editHedgeAmountPercent" step="1" min="0" max="100" value="50" style="width: 100%; padding: 10px; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 6px; background: rgba(15, 15, 30, 0.6); color: white;" />
              </div>
              <div class="form-group">
                <label style="color: rgba(255, 255, 255, 0.9); font-size: 0.9em;">Slippage (bps):</label>
                <input type="number" id="editSlippageBps" step="1" min="0" max="10000" value="100" style="width: 100%; padding: 10px; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 6px; background: rgba(15, 15, 30, 0.6); color: white;" />
              </div>
              <div class="form-group">
                <label style="color: rgba(255, 255, 255, 0.9); font-size: 0.9em; display: flex; align-items: center; gap: 8px;">
                  <input type="checkbox" id="editAveragePriceCloseEnabled" checked style="width: auto; margin: 0;" />
                  –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω–µ
                </label>
              </div>
              <div class="form-group">
                <label style="color: rgba(255, 255, 255, 0.9); font-size: 0.9em;">–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç —Å—Ä–µ–¥–Ω–µ–π (%):</label>
                <input type="number" id="editAveragePriceDeviation" step="0.1" min="0" max="10" value="2" style="width: 100%; padding: 10px; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 6px; background: rgba(15, 15, 30, 0.6); color: white;" />
              </div>
            </div>
            <div class="form-actions" style="margin-top: 20px;">
              <button type="button" id="savePoolConfigBtn" class="save-btn" style="width: 100%; padding: 14px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer;">
                üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
              </button>
            </div>
            <div id="poolConfigModalStatus" class="rpc-status" style="display: none; margin-top: 15px;">
              <div class="status-message"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Pair Pools Modal -->
  <div id="pairPoolsModal" class="pool-modal">
    <div class="pool-modal-content">
      <div class="pool-modal-header">
        <h2 id="pairPoolsModalTitle">–ü—É–ª—ã –¥–ª—è –ø–∞—Ä—ã</h2>
        <button class="pool-modal-close" id="closePairPoolsModalBtn">&times;</button>
      </div>
      <div class="pool-modal-body">
        <div id="pairPoolsModalLoading" class="pool-modal-loading">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>
        <div id="pairPoolsModalContent" style="display: none;">
          <div style="margin-bottom: 20px; color: white; font-size: 1.1em; font-weight: 600;">
            <span id="pairPoolsCount">–ù–∞–π–¥–µ–Ω–æ –ø—É–ª–æ–≤: 0</span>
          </div>
          <div id="pairPoolsContainer" class="pools-container"></div>
        </div>
        <div id="pairPoolsModalError" class="pool-modal-error" style="display: none;"></div>
      </div>
    </div>
  </div>

  <!-- Pool Detail Modal -->
  <div id="poolModal" class="pool-modal">
    <div class="pool-modal-content">
      <div class="pool-modal-header">
        <h2 id="poolModalTitle">–û—Ç–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é</h2>
        <button 
          type="button" 
          class="pool-modal-close" 
          id="closePoolModalBtn"
          onclick="document.getElementById('poolModal').classList.remove('show')"
          style="cursor: pointer; z-index: 10000; position: relative;"
        >&times;</button>
      </div>
      <div class="pool-modal-body">
        <div id="poolModalLoading" class="pool-modal-loading">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>
        <div id="poolModalContent" style="display: none;">
          <form id="openPositionForm">
            <div class="form-group">
              <label for="positionTotalAmount" style="color: white; font-size: 1.1em; font-weight: 600; margin-bottom: 12px; display: block;">–û–±—â–∞—è —Å—É–º–º–∞ –ø–æ–∑–∏—Ü–∏–∏ (USD)</label>
              <input 
                type="number" 
                id="positionTotalAmount" 
                placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –≤ USD" 
                step="0.01" 
                min="0" 
                required 
                style="width: 100%; padding: 16px; border: 1px solid rgba(102, 126, 234, 0.3); border-radius: 12px; background: rgba(15, 15, 30, 0.6); color: white; font-size: 16px; font-weight: 500;" 
              />
            </div>
            
            <div class="form-actions" style="margin-top: 24px; display: flex; gap: 12px;">
              
              <button 
                type="submit" 
                id="openPositionBtn" 
                class="save-btn" 
                style="flex: 2; padding: 16px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 12px; font-size: 18px; font-weight: 600; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);"
                onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 16px rgba(102, 126, 234, 0.4)'"
                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(102, 126, 234, 0.3)'"
              >
                üöÄ –û—Ç–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é
              </button>
            </div>
          </form>
          
          <div id="positionStatus" class="rpc-status" style="display: none; margin-top: 20px;">
              <div class="status-message"></div>
          </div>
        </div>
        <div id="poolModalError" class="pool-modal-error" style="display: none;"></div>
      </div>
    </div>
  </div>
  </main>

  <!-- Chart.js for graphs -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <!-- Solana Web3 (browser, for deserializing VersionedTransaction) -->
  <script src="https://unpkg.com/@solana/web3.js@1.95.3/lib/index.iife.min.js"></script>
  <script src="swap.js"></script>
  <script src="app.js"></script>
  <!-- Phantom Wallet SDK -->
  <script>
    // Check if Phantom is installed
    window.addEventListener('load', () => {
      if (window.solana && window.solana.isPhantom) {
        console.log('Phantom wallet detected');
      } else {
        console.log('Phantom wallet not detected');
      }
    });
  </script>
</body>
</html>

